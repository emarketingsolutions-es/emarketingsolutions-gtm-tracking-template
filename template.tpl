___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "categories": [
    "AFFILIATE_MARKETING",
    "MARKETING",
    "ATTRIBUTION"
  ],
  "displayName": "Emarketingsolutions.es",  
  
  "brand": {
    "id": "github.com_emarketingsolutions-es",
    "displayName": "emarketingsolutions-es",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Emarketingsolutions.es Sales and Leads Conversion Tag. \\n\\nThis tag will allow you to generate sale (transactions) events or custom lead events that will be tracked on your eMas campaign.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "hostname",
    "displayName": "Tracking host",
    "simpleValueType": true,
    "help": "Please leave blank by default, unless instructed otherwise by your eMarketingSolutions Tech Manager"
  },
  {
    "type": "SELECT",
    "name": "tagType",
    "displayName": "Tag Type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "sale",
        "displayValue": "Sales Tag"
      },
      {
        "value": "lead",
        "displayValue": "Leads Tag"
      },
      {
        "value": "basket",
        "displayValue": "Basket Product Group Tag"
      }
    ],
    "simpleValueType": true,
    "help": "Please select whether this tag should track sale events (retail orders and transactions), or if it should track lead events. Leads can be any custom visitor actions such as newsletter signups or demo requests."
  },
  {
    "type": "TEXT",
    "name": "organizationID",
    "displayName": "Organization ID",
    "simpleValueType": true,
    "help": "Please enter your EmarketingSolutions Organization ID, or a variable that will return this value."
  },
  {
    "type": "TEXT",
    "name": "eventID",
    "displayName": "Event ID",
    "simpleValueType": true,
    "help": "Please enter your EmarketingSolutions Event ID, or a variable that will return this value."
  },
  {
    "type": "TEXT",
    "name": "orderID",
    "displayName": "Transaction ID",
    "simpleValueType": true,
    "help": "Please select the dataLayer variable for your Transaction or Order Id.\nFor the Sales tag this should be the same Id that you use to track sales internally, and it should be unique for every transaction."
  },
  {
    "type": "TEXT",
    "name": "orderAmount",
    "displayName": "Transaction Amount",
    "simpleValueType": true,
    "help": "Please select the dataLayer variable for the Total Transaction (Order) Amount \u003cstrong\u003eexcluding any applicable tax\u003c/strong\u003e.\nThis should be formatted as a string currency amount, for example 1,234.56 should be formatted as 1234.56",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "lead",
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "extraQueries",
    "displayName": "Additional Paramters (Optional)",
    "groupStyle": "ZIPPY_OPEN_ON_PARAM",
    "subParams": [
      {
        "type": "LABEL",
        "name": "queries label",
        "displayName": "Add extra information to your sales tracking"
      },
      {
        "type": "TEXT",
        "name": "voucherCode",
        "displayName": "Voucher code",
        "simpleValueType": true,
        "help": "Please add a variable for the voucher code used on the checkout page of your webshop.\nVoucher codes should be formatted as a string, such as DISCOUNT10."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "sale",
        "type": "EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Introduzca aquí su código de plantilla.
const log = require('logToConsole');

//// PERMISSIONS ////
const encodeUriComponent = require('encodeUriComponent');
const query              = require('queryPermission');
const sendPixel          = require('sendPixel');

//// TAG LOGIC ////

// Set values from tag config
const organizationID  = data.hasOwnProperty('organizationID') ? '' + data.organizationID : '';
const eventID   = data.hasOwnProperty('eventID') ? '' + data.eventID : '';
const orderID     = data.hasOwnProperty('orderID') ? '' + data.orderID : '';
const orderAmount = data.hasOwnProperty('orderAmount') ? '' + data.orderAmount : 'rnd';
const voucher     = data.hasOwnProperty('voucherCode') ? '' + data.voucherCode : '';

// Set tracking host
let domain = '';
if (data.hasOwnProperty('hostname') && data.hostname !== undefined) {
  domain = data.hostname+'.uinterbox.com';
} else {
  domain = 'emas.uinterbox.com';
}

log(data.hostname);

let imgUrl  = '';
// Construct for regular sales/lead tag
imgUrl += 'https://' + domain + '/tracking/cnv';
imgUrl += '?org=' + encodeUriComponent(organizationID);
imgUrl += '&evt='  + encodeUriComponent(eventID);
imgUrl += '&cid='  + encodeUriComponent(orderID);
if (data.tagType !== 'lead') {
  // add sales only queries
  imgUrl += '&cval='  + encodeUriComponent(orderAmount);
  imgUrl += '&vco='  + encodeUriComponent(voucher);
}

// pixel success callback
if (query('send_pixel', imgUrl)) {
  sendPixel(imgUrl, data.gtmOnSuccess, data.gtmOnFailure);
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 19/2/2024, 12:45:05